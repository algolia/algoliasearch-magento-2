<?php
/** @var \Algolia\AlgoliaSearch\Block\Widget\TrendsItem $block */
/** @var \Magento\Framework\Escaper $escaper */

$isEnabled = $block->isTrendingItemEnabled();
if ($isEnabled):
    $trendConstainer =  'trendItems' . $block->generateUniqueToken(); ?>
    <div id="algoliaRecommend">
        <div id="<?= $escaper->escapeHtmlAttr($trendConstainer) ?>" class="trendsItem recommend-component"></div>
    </div>
    <script type="text/x-magento-init">
        {
            "*": {
                "Algolia_AlgoliaSearch/js/recommend" : {
                    "recommendTrendContainer" : "<?= $escaper->escapeJs($trendConstainer) ?>",
                    "numOfTrendsItem" : "<?= $escaper->escapeJs($block->getData('numOfTrendsItem')) ?>",
                    "facetName" : "<?= $escaper->escapeJs($block->getData('facetName')) ?>",
                    "facetValue" : "<?= $escaper->escapeJs($block->getData('facetValue')) ?>"
                }
            }
        }
    </script>
    <script type="text/x-magento-init">
        {
            "[data-role=tocart-form]": {
                "catalogAddToCart": {}
            }
        }
    </script>
<?php endif; ?>
